<!DOCTYPE html>
<meta charset="utf-8">
<title>Zoom + Pan</title>
<style>

body {
  font: 300 36px "Helvetica Neue";
  height: 640px;
  margin: 80px 160px 80px 160px;
  overflow: hidden;
  position: relative;
  width: 960px;
}

table {
  border-spacing:50px 50px;
}

.overlay {
  fill: none;
  pointer-events: all;
}

#geometric_zoom, #semantic_zoom{
  width: 400px;
  height: 400px;
}

</style>
<body>
  <div id="header">&ldquo;Semantic Zoom&rdquo;</div>
  <table>
  <tr>
    <td style="font-size:18px" align="center">Geometric Zoom</td>
    <td style="font-size:18px" align="center">Semantic Zoom</td>
  </tr>
  <tr>
    <td><div id="geometric_zoom"></div></td>
    <td><div id="semantic_zoom"></div></td>
  </tr>
  </table>
</body>
<script src="d3/d3.v3.min.js"></script>
<script src="jquery-1.9.1.js"></script>
<script>

function geometric_zoom(){
  var width = $("#geometric_zoom").width(),
      height = $("#geometric_zoom").height();

  var randomX = d3.random.normal(width / 2, 50),
      randomY = d3.random.normal(height / 2, 50);
      randomZ = d3.random.normal(1, 0.2);

  var data = d3.range(2000).map(function() {
    return [
      randomX(),
      randomY(),
      randomZ()
    ];
  });

  var svg = d3.select("#geometric_zoom").append("svg")
      .attr("width", width)
      .attr("height", height)
    .append("g")
      .call(d3.behavior.zoom().scaleExtent([1, 8]).on("zoom", zoom))
    .append("g");

  svg.append("rect")
      .attr("class", "overlay")
      .attr("width", width)
      .attr("height", height);

  svg.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("r", function(d) { return d[2] })
      .attr("transform", function(d) { return "translate(" + d.slice(0,2) + ")"; })
      .style("fill", "blue");

  function zoom() {
    svg.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
    }
}

function semantic_zoom(){
  var width = $("#semantic_zoom").width(),
      height = $("#semantic_zoom").height();

  var randomX = d3.random.normal(width / 2, 50),
      randomY = d3.random.normal(height / 2, 50);
      randomZ = d3.random.normal( 1.5, 0.2 );

  var data = d3.range(2000).map(function() {
    return [
      randomX(),
      randomY(),
      randomZ()
    ];
  });

  var x = d3.scale.linear()
      .domain([0, width])
      .range([0, width]);

  var y = d3.scale.linear()
      .domain([0, height])
      .range([height, 0]);

  var svg = d3.select("#semantic_zoom").append("svg")
      .attr("width", width)
      .attr("height", height)
    .append("g")
      .call(d3.behavior.zoom().x(x).y(y).scaleExtent([1, 8]).on("zoom", zoom));

  svg.append("rect")
      .attr("class", "overlay")
      .attr("width", width)
      .attr("height", height);

  var circle = svg.selectAll("circle")
      .data(data)
    .enter().append("circle")
      .attr("r", function(d) { return d[2] })
      .attr("transform", transform)
      .style("fill", "blue");

  function zoom() {
    circle.attr("transform", transform);
  }

  function transform(d) {
    return "translate(" + x(d[0]) + "," + y(d[1]) + ")";
  }
}

geometric_zoom();
semantic_zoom();

</script>
